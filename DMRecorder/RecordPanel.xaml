<UserControl
    x:Class="DMRecorder.RecordPanel"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:DMRecorder"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:core="using:DMRecorder.Core" xmlns:converters="using:DMRecorder.Converters"
    mc:Ignorable="d" IsTabStop="False">

    <UserControl.Resources>
        <converters:RecordStateEqualToBooleanConverter x:Key="RecordStateEqualToBooleanConverter" />
    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        
        <CommandBar Grid.Row="0" IsOpen="False" Background="Transparent" OverflowButtonVisibility="Collapsed" Opacity="0.9">
            <!-- Play -->
            <AppBarToggleButton Command="{x:Bind ViewModel.RecordCommand}" IsChecked="{x:Bind ViewModel.RecordState, Converter={StaticResource RecordStateEqualToBooleanConverter}, ConverterParameter=Play, Mode=OneWay}">
                <AppBarToggleButton.CommandParameter>
                    <core:RecordState>Play</core:RecordState>
                </AppBarToggleButton.CommandParameter>
                <AppBarToggleButton.Icon>
                    <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xe768;" />
                </AppBarToggleButton.Icon>
            </AppBarToggleButton>
            <!-- Stop -->
            <AppBarButton Command="{x:Bind ViewModel.RecordCommand}">
                <AppBarButton.CommandParameter>
                    <core:RecordState>Stop</core:RecordState>
                </AppBarButton.CommandParameter>
                <AppBarButton.Icon>
                    <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xe71a;" />
                </AppBarButton.Icon>
            </AppBarButton>

            <AppBarSeparator />

            <!-- Record -->
            <AppBarToggleButton Command="{x:Bind ViewModel.RecordCommand}" IsChecked="{x:Bind ViewModel.RecordState, Converter={StaticResource RecordStateEqualToBooleanConverter}, ConverterParameter=Record, Mode=OneWay}">
                <AppBarToggleButton.CommandParameter>
                    <core:RecordState>Record</core:RecordState>
                </AppBarToggleButton.CommandParameter>
                <AppBarToggleButton.Icon>
                    <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xe7c8;" Foreground="OrangeRed" />
                </AppBarToggleButton.Icon>
            </AppBarToggleButton>
            <!-- Pause -->
            <AppBarToggleButton Command="{x:Bind ViewModel.RecordCommand}" IsChecked="{x:Bind ViewModel.RecordState, Converter={StaticResource RecordStateEqualToBooleanConverter}, ConverterParameter=RecordPause|PlayPause, Mode=OneWay}">
                <AppBarToggleButton.CommandParameter>
                    <core:RecordState>RecordPause</core:RecordState>
                </AppBarToggleButton.CommandParameter>
                <AppBarToggleButton.Icon>
                    <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xe769;" />
                </AppBarToggleButton.Icon>
            </AppBarToggleButton>

            <!--<AppBarSeparator />

            <AppBarButton x:Uid="Settings">
                <AppBarButton.Icon>
                    <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xe713;" />
                </AppBarButton.Icon>
            </AppBarButton>-->
        </CommandBar>

        <StackPanel Grid.Row="2" Orientation="Vertical" Spacing="4">
            <StackPanel Orientation="Horizontal" Spacing="4">
                <ComboBox>
                    <ComboBox.Items>
                        <ComboBoxItem IsSelected="True">44100</ComboBoxItem>
                        <ComboBoxItem>96000</ComboBoxItem>
                    </ComboBox.Items>
                </ComboBox>
                <TextBlock>Hz</TextBlock>
            </StackPanel>

            <ComboBox ItemsSource="{x:Bind ViewModel.Drivers}" HorizontalAlignment="Stretch" />
        </StackPanel>
    </Grid>
</UserControl>
